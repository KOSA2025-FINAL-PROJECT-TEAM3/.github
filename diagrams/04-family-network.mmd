graph LR
    subgraph "Family Group"
        P1[ğŸ‘´ ë¶€ëª¨ë‹˜ 1]
        P2[ğŸ‘µ ë¶€ëª¨ë‹˜ 2]
        C1[ğŸ‘¨ ìë…€ 1]
        C2[ğŸ‘© ìë…€ 2]
    end

    subgraph "Shared Data"
        M[ì•½ ì •ë³´]
        S[ë³µìš© ìŠ¤ì¼€ì¤„]
        L[ë³µìš© ë¡œê·¸]
        D[ì‹ë‹¨ ê¸°ë¡]
    end

    subgraph "Real-time Sync"
        WS[Spring WebSocket/STOMP<br/>+ Kafka Events]
    end

    P1 -->|WebSocket ì—°ê²°| WS
    P2 -->|WebSocket ì—°ê²°| WS
    C1 -->|WebSocket ì—°ê²°| WS
    C2 -->|WebSocket ì—°ê²°| WS

    WS <--> M
    WS <--> S
    WS <--> L
    WS <--> D

    style P1 fill:#ffd1dc
    style P2 fill:#ffd1dc
    style C1 fill:#b4e7f8
    style C2 fill:#b4e7f8
